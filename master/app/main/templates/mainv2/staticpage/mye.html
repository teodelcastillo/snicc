{% extends 'mainv2/base.html' %}
{% load static %}

{% block head %}
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<!-- bootstrap-select -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">

<!-- C3.js -->
<link href="{% static 'main/css/c3.css' %}" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js"></script>

<link rel="stylesheet" href="{% static 'main/css/mye.css' %}" type="text/css">

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const listContainer = document.getElementById("measures_list");
  const noResults = document.getElementById("no_results");
  const searchInput = document.getElementById("search_measures");
  const filtroTipo = document.getElementById("filtro_tipo");
  const filtroLinea = document.getElementById("filtro_linea");
  const filtroNivel = document.getElementById("filtro_nivel");
  const totalLabel = document.getElementById("measures_count");
  const btnClear = document.getElementById("clear_filters");

  let measures = [];

  // Loader inicial
  listContainer.innerHTML = `
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="text-muted mt-3">Cargando medidas...</p>
    </div>`;

  // 1Ô∏è‚É£ Cargar datos desde el backend
  async function loadMeasures() {
    try {
      const res = await fetch("/measure/filter.json");
      const data = await res.json();
      measures = data.measures || data.data || [];
      renderMeasures(measures);
    } catch (err) {
      console.error("Error cargando medidas:", err);
      listContainer.innerHTML = `<p class="text-danger text-center py-4">No se pudieron cargar las medidas.</p>`;
    }
  }

  // 2Ô∏è‚É£ Renderizar cards din√°micamente
  function renderMeasures(filtered) {
    listContainer.innerHTML = "";

    if (!filtered.length) {
      noResults.style.display = "block";
      totalLabel.textContent = 0;
      return;
    }
    noResults.style.display = "none";

    filtered.forEach((m) => {
      const badgeColor =
        m.status?.toLowerCase().includes("avanz") ? "bg-success" :
        m.status?.toLowerCase().includes("curso") ? "bg-info text-dark" : "bg-secondary";

      const card = `
        <div class="col">
          <div class="card shadow-md border h-100 rounded-3 hover-shadow">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="fw-semibold" style="color:#262C51;">${m.name || "Sin t√≠tulo"}</h5>
                <span class="badge ${badgeColor}">${m.status || "N/A"}</span>
              </div>
              <p class="text-muted mb-2">${m.description || ""}</p>
              <p class="text-muted small mb-3">
                <i class="bi bi-person"></i> ${m.responsable || "No asignado"}
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <span class="badge bg-info text-dark">${m.pilar || "Sin pilar"}</span>
                <button class="btn btn-sm text-white" style="background-color:#262C51;"
                        onclick="verDetalle(${m.id})">
                  Ver detalles
                </button>
              </div>
            </div>
          </div>
        </div>`;
      listContainer.insertAdjacentHTML("beforeend", card);
    });

    totalLabel.textContent = filtered.length;
  }

  // 3Ô∏è‚É£ Aplicar b√∫squeda y filtros
  function applyFilters() {
    const searchTerm = searchInput.value.toLowerCase();
    const tipo = filtroTipo.value;
    const linea = filtroLinea.value;
    const nivel = filtroNivel.value;

    const filtered = measures.filter((m) => {
      const matchesSearch =
        !searchTerm ||
        m.name?.toLowerCase().includes(searchTerm) ||
        m.description?.toLowerCase().includes(searchTerm) ||
        m.responsable?.toLowerCase().includes(searchTerm);

      const matchesTipo = !tipo || (m.pilar && m.pilar.includes(tipo));
      const matchesLinea = !linea || (m.linea && m.linea.includes(linea));
      const matchesNivel =
        nivel === "all" || (m.status && m.status.toLowerCase().includes(nivel.toLowerCase()));

      return matchesSearch && matchesTipo && matchesLinea && matchesNivel;
    });

    renderMeasures(filtered);
  }

  // 4Ô∏è‚É£ Eventos
  searchInput.addEventListener("input", applyFilters);
  filtroTipo.addEventListener("change", applyFilters);
  filtroLinea.addEventListener("change", applyFilters);
  filtroNivel.addEventListener("change", applyFilters);

  btnClear.addEventListener("click", () => {
    filtroTipo.value = "";
    filtroLinea.value = "";
    filtroNivel.value = "all";
    searchInput.value = "";
    renderMeasures(measures);
  });

  // 5Ô∏è‚É£ Iniciar carga
  await loadMeasures();
});

function verDetalle(id) {
  window.location.href = `/measure/${id}/`;
}
</script>

{% endblock %}

{% block content %}

        <div class="mye-content" style="background-color: white !important;">
            <div class="mye-header">
        <div class="mye-title-content" style="display: flex; flex-direction: column; align-items: flex-start;">
          <h1 id="mye-title" style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
            M√≥dulo de Monitoreo - Cambio Clim√°tico
            <i class="bi bi-info-circle"
              role="button"
              style="cursor: pointer; font-size: 1.1em;"
              data-bs-toggle="modal"
              data-bs-target="#drawerRightInfo"
              aria-label="Ver informaci√≥n sobre el m√≥dulo">
            </i>
          </h1>
          <p style="margin: 0 0 0 40px; color: #555;">
            Sistema de seguimiento del Plan Nacional de Adaptaci√≥n y Mitigaci√≥n al Cambio Clim√°tico
          </p>
        </div>

        <div class="mye-buttons float-end me-2">
            <div class="dropdown bootstrap-select" data-bs-toggle="tooltip" data-bs-placement="left" title="Descargar todas las medidas">
                <button data-bs-toggle="dropdown" aria-expanded="false"><img src="{% static 'main/images/mye/download.svg' %}" alt="Descargar documentos"><span>Descargar documentos</span></button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="/measure/export.csv">Descargar en lista (CSV)</a></li>
                    <li><div class="dropdown-item" id="download_pdf">Descargar en fichas (PDF)</div></li>
                    <li><div class="dropdown-item" onclick="openDetailPopup([], true)">Descargar detalle (PDF)</div></li>
                </ul>
            </div>
            <a href="/editor/measure/"><img src="{% static 'main/images/mye/admin.svg' %}" alt="Admin MyE"><span>Admin MyE</span></a>
        </div>
    </div>
    <div class="mye-body">
        <div class="mye-body-content"><!-- col-auto px-0-->
    <!-- Nuevo navbar estilo moderno -->
    <div class="bg-white border rounded-3 overflow-hidden"  style="border: none !important;" >
<!-- Contenedor de tabs -->
<div class="bg-white border rounded-3 shadow-md overflow-hidden" style="border-color: rgba(38,44,81,0.15);">
  <!-- Tabs Navigation -->
  <ul class="nav nav-tabs w-100" id="myeTabs" role="tablist" 
      style="display:flex; justify-content:space-between; border-bottom:1px solid rgba(38,44,81,0.15);">
    <li class="nav-item flex-fill text-center" role="presentation">
      <button 
        class="nav-link active w-100 d-flex align-items-center justify-content-center gap-2 py-3 fw-semibold"
        id="nav-panorama-tab"
        data-bs-toggle="tab"
        data-bs-target="#nav-panorama"
        type="button"
        role="tab"
        aria-controls="nav-panorama"
        aria-selected="true"
        style="color:#262C51; background:none;">
        <i class="bi bi-pie-chart-fill" style="font-size:1rem;"></i>
        Panorama General
      </button>
    </li>

    <li class="nav-item flex-fill text-center" role="presentation">
      <button 
        class="nav-link w-100 d-flex align-items-center justify-content-center gap-2 py-3 fw-semibold"
        id="nav-medidas-tab"
        data-bs-toggle="tab"
        data-bs-target="#nav-medidas"
        type="button"
        role="tab"
        aria-controls="nav-medidas"
        aria-selected="false"
        style="color:#262C51; background:none;">
        <i class="bi bi-bar-chart-fill" style="font-size:1rem;"></i>
        Medidas
      </button>
    </li>

    <li class="nav-item flex-fill text-center" role="presentation">
      <button 
        class="nav-link w-100 d-flex align-items-center justify-content-center gap-2 py-3 fw-semibold"
        id="nav-marco-tab"
        data-bs-toggle="tab"
        data-bs-target="#nav-marco"
        type="button"
        role="tab"
        aria-controls="nav-marco"
        aria-selected="false"
        style="color:#262C51; background:none;">
        <i class="bi bi-book-fill" style="font-size:1rem;"></i>
        L√≠neas y Enfoques
      </button>
    </li>
  </ul>

    </div>
    <!-- Contenido de tabs -->
    <div class="tab-content" id="nav-tabContent" style="margin-top:20px;">
<!-- TAB: Panorama General -->
<div class="tab-pane fade show active" id="nav-panorama" role="tabpanel" aria-labelledby="nav-panorama-tab">

  <!-- Header con t√≠tulo y bot√≥n de descarga -->
  <div class="d-flex align-items-center justify-content-between mb-4 flex-wrap gap-3">
    <div>
      <h2 class="fw-semibold mb-1" style="color:#262C51;">Vista General del Sistema</h2>
      <p class="text-muted mb-0">An√°lisis estad√≠stico y estado de todas las medidas del plan</p>
    </div>
    <button class="btn btn-primary d-flex align-items-center gap-2" style="background-color:#262C51; border:none;">
      <i class="bi bi-download"></i> Descargar Reporte General
    </button>
  </div>

<!-- Tarjetas resumen -->
<div class="row g-4 mb-5">

  <!-- üü£ Total de Medidas -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color: rgba(38,44,81,0.2); transition: all .3s ease;">
      
      <!-- Header (40px alto, 24px padding, centrado) -->
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; ">
        <span class="fw-semibold">Total de Medidas</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:rgba(38,44,81,0.1); width:36px; height:36px;">
          <i class="bi bi-bullseye" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <!-- Body -->
      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="mb-1 fw-semibold" style="color:#262C51;">{{ total_measures }}</h3>
        <p class="text-muted mb-0">Acciones en monitoreo</p>
      </div>
    </div>
  </div>

  <!-- üü¢ Progreso Avanzado -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color:#c8e6c9; transition: all .3s ease;">
      
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e8f5e9, #f5fff9); border-color:#c8e6c9; color:#198754;">
        <span class="fw-semibold">Progreso Avanzado</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:#d1fadf; width:36px; height:36px;">
          <i class="bi bi-graph-up-arrow" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="text-success mb-1 fw-semibold">{{ percent_advanced }}</h3>
        <p class="text-muted mb-0">Medidas con progreso avanzado</p>
      </div>
    </div>
  </div>

  <!-- üîµ En Ejecuci√≥n -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color:#bbdefb; transition: all .3s ease;">
      
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff); border-color:#bbdefb; color:#0d6efd;">
        <span class="fw-semibold">En Ejecuci√≥n</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:#d7efff; width:36px; height:36px;">
          <i class="bi bi-speedometer2" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="mb-1 fw-semibold" style="color:#262C51;">{{ execution_count }}</h3>
        <p class="text-muted mb-0">Acciones en monitoreo</p>
      </div>

    </div>
  </div>
</div>


<!-- Gr√°ficos principales -->
<div class="row g-4 mb-5">

  <!-- üü£ Gr√°fico Tipolog√≠a de Medidas -->
  <div class="col-lg-6">
    <div class="card border shadow-md h-100 overflow-hidden position-relative"
         style="transition: all 0.3s ease; border-color: rgba(38,44,81,0.15);">
      
      <!-- Overlay hover -->
      <div class="position-absolute top-0 start-0 w-100 h-100"
           style="background:linear-gradient(to bottom right, rgba(38,44,81,0.1), transparent);
                  opacity:0; transition:opacity 0.3s ease; z-index:1;"></div>

      <!-- Header con estilo principal oscuro -->
      <div class="card-header border-bottom flex-column justify-content-center"
          style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff);
                  border-color:#bbdefb; color:#0d6efd; text-align:left;">
        <h5 class="fw-semibold mb-1" style="margin:0;">Tipolog√≠a de Medidas</h5>
        <small class="text-muted" style="margin:0;">Clasificaci√≥n seg√∫n adaptaci√≥n, mitigaci√≥n y p√©rdidas y da√±os</small>
      </div>



      <!-- Body -->
      <div class="card-body position-relative" style="height:400px; z-index:2;">
        <div id="chart_tipo_medidas" style="height:100%; width:100%;"></div>
      </div>
    </div>
  </div>

  <!-- üîµ Gr√°fico Estado de Avance General -->
  <div class="col-lg-6">
    <div class="card border shadow-md h-100 overflow-hidden position-relative"
         style="transition: all 0.3s ease; border-color:#bbdefb;">
      
      <!-- Overlay hover -->
      <div class="position-absolute top-0 start-0 w-100 h-100"
           style="background:linear-gradient(to bottom right, #e3f2fd, transparent);
                  opacity:0; transition:opacity 0.3s ease; z-index:1;"></div>

      <!-- Header con estilo azul claro -->
      <div class="card-header border-bottom flex-column justify-content-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff); border-color:#bbdefb; color:#0d6efd;">
        <h5 class="fw-semibold mb-1">Estado de Avance General</h5>
        <small class="text-muted">
          Distribuci√≥n de medidas seg√∫n su nivel de progreso
        </small>
      </div>

      <!-- Body -->
      <div class="card-body position-relative" style="height:400px; z-index:2;">
        <div id="chart_estado_general" style="height:100%; width:100%;"></div>
      </div>
    </div>
  </div>

</div>



  <!-- An√°lisis del panorama -->
  <div class="card shadow-md border overflow-hidden" style="min-height:185px;">
    <div class="card-header border-bottom flex-column justify-content-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff); border-color:#bbdefb; color:#0d6efd;">
      <h5 class="fw-semibold mb-0" style="color:#262C51;">An√°lisis del Panorama</h5>
    </div>
    <div class="card-body">
      <div class="row g-4">
        <div class="col-md-6">
          <h6 class="mb-2" style="color:#262C51;">Categor√≠a predominante</h6>
          <p class="text-muted mb-0">
              {{ top_pilar_name }} con <strong>{{ top_pilar_count }}</strong> medidas
          </p>
        </div>
        <div class="col-md-6">
          <h6 class="mb-2" style="color:#262C51;">Estado predominante</h6>
          <p class="text-muted mb-0">
              {{ pred_status_name }} con <strong>{{ pred_status_count }}</strong> medidas
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- TAB: Medidas -->
<div class="tab-pane fade" id="nav-medidas" role="tabpanel" aria-labelledby="nav-medidas-tab">

  <!-- Tarjetas de estad√≠sticas -->
<div class="row g-4 mb-5">

  <!-- üü£ Total de Medidas -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color: rgba(38,44,81,0.2); transition: all .3s ease;">
      
      <!-- Header (40px alto, 24px padding, centrado) -->
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; ">
        <span class="fw-semibold">Total de Medidas</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:rgba(38,44,81,0.1); width:36px; height:36px;">
          <i class="bi bi-bullseye" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <!-- Body -->
      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="mb-1 fw-semibold" style="color:#262C51;">{{ total_measures }}</h3>
        <p class="text-muted mb-0">Acciones en monitoreo</p>
      </div>
    </div>
  </div>

  <!-- üü¢ Progreso Avanzado -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color:#c8e6c9; transition: all .3s ease;">
      
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e8f5e9, #f5fff9); border-color:#c8e6c9; color:#198754;">
        <span class="fw-semibold">Progreso Avanzado</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:#d1fadf; width:36px; height:36px;">
          <i class="bi bi-graph-up-arrow" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="text-success mb-1 fw-semibold">{{ percent_advanced }}</h3>
        <p class="text-muted mb-0">Medidas con progreso avanzado</p>
      </div>
    </div>
  </div>

  <!-- üîµ En Ejecuci√≥n -->
  <div class="col-md-4">
    <div class="card border shadow-md position-relative overflow-hidden"
         style="height:220px; border-color:#bbdefb; transition: all .3s ease;">
      
      <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
           style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff); border-color:#bbdefb; color:#0d6efd;">
        <span class="fw-semibold">En Ejecuci√≥n</span>
        <div class="p-2 rounded d-flex align-items-center justify-content-center" 
             style="background-color:#d7efff; width:36px; height:36px;">
          <i class="bi bi-speedometer2" style="font-size:1.1rem;"></i>
        </div>
      </div>

      <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
          style="height:calc(220px - 40px); padding-left:24px;">
        <h3 class="mb-1 fw-semibold" style="color:#262C51;">{{ execution_count }}</h3>
        <p class="text-muted mb-0">Acciones en monitoreo</p>
      </div>

    </div>
  </div>
</div>

  <div class="tab-content mt-4" id="nav-tabContent">
    <div class="tab-pane fade show active" id="nav-medidas" role="tabpanel">

      <!-- Buscador -->
      <div class="d-flex align-items-center gap-3 mb-4">
        <div style="width:6px;height:32px;background:linear-gradient(to bottom,#262C51,rgba(38,44,81,0.5));border-radius:4px;"></div>
        <h2 class="fw-semibold mb-0" style="color:#262C51;">Explorar Medidas</h2>
      </div>

      <div class="position-relative mb-4">
        <i class="bi bi-search position-absolute" style="left:16px;top:50%;transform:translateY(-50%);color:#6c757d;font-size:1.2rem;"></i>
        <input id="search_measures" class="form-control ps-5 py-3 border-2 rounded-3" placeholder="Buscar medidas por t√≠tulo, descripci√≥n o responsable...">
      </div>

      <div class="row g-4">
        <!-- Filtros -->
        <div class="col-lg-3">
          <div class="card border shadow-md rounded-3">
            <div class="card-header border-bottom bg-light">
              <h6 class="fw-semibold mb-0" style="color:#262C51;">Filtros</h6>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <label class="fw-semibold mb-2" for="filtro_tipo" style="color:#262C51;">Tipo de medida</label>
                <select id="filtro_tipo" class="form-select">
                  <option value="">Todas</option>
                  <option>Adaptaci√≥n</option>
                  <option>Mitigaci√≥n</option>
                  <option>P√©rdidas y Da√±os</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="fw-semibold mb-2" for="filtro_linea" style="color:#262C51;">L√≠nea o enfoque</label>
                <select id="filtro_linea" class="form-select">
                  <option value="">Todas</option>
                  <option>Transversales</option>
                  <option>Instrumentales</option>
                  <option>Estrat√©gicas</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="fw-semibold mb-2" for="filtro_nivel" style="color:#262C51;">Nivel de avance</label>
                <select id="filtro_nivel" class="form-select">
                  <option value="all">Todos</option>
                  <option>Inicial</option>
                  <option>En curso</option>
                  <option>Avanzada</option>
                </select>
              </div>
              <button id="clear_filters" class="btn w-100 text-white" style="background-color:#262C51;">Limpiar filtros</button>
            </div>
          </div>
        </div>

        <!-- Listado -->
        <div class="col-lg-9">
          <div class="d-flex justify-content-between align-items-center border rounded-3 p-3 mb-3" style="border:2px solid rgba(38,44,81,0.1);">
            <p class="mb-0 text-muted">Mostrando <span id="measures_count" class="fw-semibold" style="color:#262C51;">0</span> medidas</p>
          </div>

          <div id="no_results" class="text-center py-5 border border-dashed rounded-3" style="border-color:rgba(38,44,81,0.2);display:none;">
            <i class="bi bi-search mb-3" style="font-size:3rem;color:rgba(38,44,81,0.4);"></i>
            <h5 class="text-muted mb-2">No se encontraron medidas</h5>
            <p class="text-muted">Intenta ajustar los filtros o t√©rminos de b√∫squeda</p>
          </div>

          <div id="measures_list" class="row row-cols-1 g-4"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TAB: Marco Conceptual -->
<div class="tab-pane fade" id="nav-marco" role="tabpanel" aria-labelledby="nav-marco-tab">

  <!-- Header con t√≠tulo y bot√≥n -->
  <div class="d-flex align-items-center justify-content-between mb-4 flex-wrap gap-3">
    <div>
      <h2 class="fw-semibold mb-1" style="color:#262C51;">L√≠neas y Enfoques</h2>
      <p class="text-muted mb-0">Ejes transversales, sectores estrat√©gicos y pilares de gobernanza que gu√≠an nuestras acciones clim√°ticas</p>
    </div>
    <button class="btn btn-primary d-flex align-items-center gap-2" style="background-color:#262C51; border:none;">
      <i class="bi bi-download"></i> Descargar Cat√°logo Completo
    </button>
  </div>

  <!-- Grilla de Cards -->
  <div class="row g-4 mb-5">

    <!-- üü£ Enfoques Transversales -->
    <div class="col-md-6">
      <div class="card border shadow-md position-relative overflow-hidden"
           style="height:220px; border-color:#c5cae9; transition:all .3s ease;">
        <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
             style="height:90px; padding:24px; background:linear-gradient(to right, #e8eaf6, #f3e5f5); border-color:#c5cae9; color:#262C51;">
          <span class="fw-semibold">Enfoques Transversales</span>
          <div class="p-2 rounded d-flex align-items-center justify-content-center"
               style="background-color:#e3e0f3; width:36px; height:36px;">
            <i class="bi bi-globe" style="font-size:1.1rem;"></i>
          </div>
        </div>
        <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
             style="height:calc(220px - 90px); padding-left:24px;">
          <p class="text-muted mb-2">
            Incorporan principios de equidad, g√©nero, derechos humanos y sostenibilidad para fortalecer las pol√≠ticas clim√°ticas.
          </p>
          <span class="badge rounded-pill text-white" style="background-color:#262C51; opacity:0.85;">Transversal</span>
        </div>
      </div>
    </div>

    <!-- üü¢ L√≠neas Instrumentales -->
    <div class="col-md-6">
      <div class="card border shadow-md position-relative overflow-hidden"
           style="height:220px; border-color:#c8e6c9; transition:all .3s ease;">
        <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
             style="height:90px; padding:24px; background:linear-gradient(to right, #e7f9ed, #f5fff9); border-color:#c8e6c9; color:#198754;">
          <span class="fw-semibold">L√≠neas Instrumentales</span>
          <div class="p-2 rounded d-flex align-items-center justify-content-center"
               style="background-color:#d1fadf; width:36px; height:36px;">
            <i class="bi bi-gear-fill" style="font-size:1.1rem;"></i>
          </div>
        </div>
        <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
             style="height:calc(220px - 90px); padding-left:24px;">
          <p class="text-muted mb-2">
            Conjunto de herramientas t√©cnicas y de gesti√≥n que permiten operacionalizar las acciones clim√°ticas a nivel sectorial y territorial.
          </p>
          <span class="badge rounded-pill text-white" style="background-color:#00897b; opacity:0.85;">Instrumental</span>
        </div>
      </div>
    </div>

    <!-- üîµ L√≠neas Estrat√©gicas -->
    <div class="col-md-6">
      <div class="card border shadow-md position-relative overflow-hidden"
           style="height:220px; border-color:#bbdefb; transition:all .3s ease;">
        <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
             style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff); border-color:#bbdefb; color:#0d6efd;">
          <span class="fw-semibold">L√≠neas Estrat√©gicas</span>
          <div class="p-2 rounded d-flex align-items-center justify-content-center"
               style="background-color:#d7efff; width:36px; height:36px;">
            <i class="bi bi-compass" style="font-size:1.1rem;"></i>
          </div>
        </div>
        <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
             style="height:calc(220px - 90px); padding-left:24px;">
          <p class="text-muted mb-2">
            Direccionan la acci√≥n clim√°tica hacia resultados de largo plazo, integrando innovaci√≥n, financiamiento e institucionalidad.
          </p>
          <span class="badge rounded-pill text-white" style="background-color:#5c6bc0; opacity:0.85;">Estrat√©gica</span>
        </div>
      </div>
    </div>

    <!-- üü£ Pilares de Gobernanza -->
    <div class="col-md-6">
      <div class="card border shadow-md position-relative overflow-hidden"
           style="height:220px; border-color:#e1bee7; transition:all .3s ease;">
        <div class="card-header border-bottom d-flex align-items-center justify-content-between text-center"
             style="height:90px; padding:24px; background:linear-gradient(to right, #f3e5f5, #f9f3ff); border-color:#e1bee7; color:#9c27b0;">
          <span class="fw-semibold">Pilares de Gobernanza</span>
          <div class="p-2 rounded d-flex align-items-center justify-content-center"
               style="background-color:#f0d7f8; width:36px; height:36px;">
            <i class="bi bi-diagram-3" style="font-size:1.1rem;"></i>
          </div>
        </div>
        <div class="card-body d-flex flex-column justify-content-center align-items-start text-start"
             style="height:calc(220px - 90px); padding-left:24px;">
          <p class="text-muted mb-2">
            Promueven coordinaci√≥n interinstitucional, participaci√≥n social y transparencia en la implementaci√≥n de pol√≠ticas clim√°ticas.
          </p>
          <span class="badge rounded-pill text-white" style="background-color:#9c27b0; opacity:0.85;">Gobernanza</span>
        </div>
      </div>
    </div>

  </div>

  <!-- Secci√≥n inferior: an√°lisis -->
  <div class="card shadow-md border overflow-hidden" style="min-height:185px;">
    <div class="card-header border-bottom flex-column justify-content-center"
         style="height:90px; padding:24px; background:linear-gradient(to right, #e3f2fd, #f9fcff);
                border-color:#bbdefb; color:#0d6efd;">
      <h5 class="fw-semibold mb-0" style="color:#262C51;">An√°lisis del Marco Conceptual</h5>
    </div>
    <div class="card-body">
      <div class="row g-4">
        <div class="col-md-6">
          <h6 class="mb-2" style="color:#262C51;">Enfoque m√°s transversal</h6>
          <p class="text-muted mb-0">Equidad de g√©nero y derechos humanos integrados en <strong>3 l√≠neas</strong>.</p>
        </div>
        <div class="col-md-6">
          <h6 class="mb-2" style="color:#262C51;">L√≠nea estrat√©gica predominante</h6>
          <p class="text-muted mb-0">Innovaci√≥n y fortalecimiento institucional presentes en <strong>5 medidas</strong>.</p>
        </div>
      </div>
    </div>
  </div>
</div>


    </div>

        </div>

        

        
    </div>
</div>

{% endblock %}
{% block loading %}
<div class="wrap-shadow" id="loading">
    <div class="uil-default-css">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div class="loading-text">Cargando</div>
    </div>
</div>

<!-- √çcono disparador -->
<h1 id="mye-title">
  M√≥dulo de Monitoreo y Evaluaci√≥n - Cambio Clim√°tico
  <i class="bi bi-info-circle"
     role="button"
     style="cursor: pointer; margin-left: 8px; font-size: 1.1em;"
     data-bs-toggle="modal"
     data-bs-target="#drawerRightInfo"
     aria-label="Ver informaci√≥n sobre el m√≥dulo">
  </i>
</h1>
<p style="margin-left: 40px">
  Sistema de seguimiento del Plan Nacional de Adaptaci√≥n y Mitigaci√≥n al Cambio Clim√°tico
</p>

<!-- Modal -->
<div class="modal fade" id="drawerRightInfo" tabindex="-1" aria-labelledby="drawerRightInfoLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content border-0 shadow-md" >

      <div class="modal-body p-4">
        <!-- Card principal -->
        <div class="shadow-md rounded-3 overflow-hidden" style="border: 1px solid rgba(38,44,81,0.2);">
          
          <!-- Header -->
          <div class="p-4 d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center gap-3">
              <div class="p-3 rounded-3 text-white shadow-md d-flex align-items-center justify-content-center" style="background: linear-gradient(to bottom right, #262C51, rgba(38,44,81,0.85));">
                <i class="bi bi-info-lg fs-4"></i>
              </div>
              <div>
                <h5 class="mb-1 fw-semibold" style="color: #262C51;">¬øQu√© es el M√≥dulo de Evaluaci√≥n y Monitoreo?</h5>
                <p class="mb-0 text-muted">
                  Herramienta para el seguimiento del Plan Nacional de Adaptaci√≥n y Mitigaci√≥n al Cambio Clim√°tico
                </p>
              </div>
            </div>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>

          <!-- Contenido -->
          <div class="p-4">
            <div class="border-top pt-3 mb-4">
              <h5 class="mb-2" style="color: #262C51;">Prop√≥sito del Sistema</h5>
              <p class="text-muted">
                El sistema de monitoreo de Argentina es una herramienta clave para seguir el progreso de las 
                acciones propuestas en el Plan Nacional de Adaptaci√≥n y Mitigaci√≥n al cambio clim√°tico. 
                A trav√©s de una serie de indicadores, mide los avances en distintos sectores y regiones del pa√≠s.
              </p>
            </div>

            <div class="row g-4">
              <div class="col-md-6">
                <div class="bg-white p-4 rounded-3 shadow-md h-100 transition-all" style="border: 1px solid rgba(38,44,81,0.2);">
                  <h6 class="mb-2 d-flex align-items-center gap-2" style="color: #262C51;">
                    <span class="d-inline-block rounded-circle" style="width:8px;height:8px;background-color:#262C51;"></span>
                    Evaluaci√≥n de Efectividad
                  </h6>
                  <p class="text-muted mb-0">
                    Permite evaluar la efectividad de las pol√≠ticas clim√°ticas implementadas en todo el territorio nacional.
                  </p>
                </div>
              </div>

              <div class="col-md-6">
                <div class="bg-white p-4 rounded-3 shadow-md h-100 transition-all" style="border: 1px solid rgba(38,44,81,0.2);">
                  <h6 class="mb-2 d-flex align-items-center gap-2" style="color: #262C51;">
                    <span class="d-inline-block rounded-circle" style="width:8px;height:8px;background-color:#262C51;"></span>
                    Transparencia y Mejora
                  </h6>
                  <p class="text-muted mb-0">
                    Busca fomentar la transparencia y la mejora continua de las estrategias de adaptaci√≥n y mitigaci√≥n.
                  </p>
                </div>
              </div>

              <div class="col-md-6">
                <div class="bg-white p-4 rounded-3 shadow-md h-100 transition-all" style="border: 1px solid rgba(38,44,81,0.2);">
                  <h6 class="mb-2 d-flex align-items-center gap-2" style="color: #262C51;">
                    <span class="d-inline-block rounded-circle" style="width:8px;height:8px;background-color:#262C51;"></span>
                    Compromisos Internacionales
                  </h6>
                  <p class="text-muted mb-0">
                    Fundamental para asegurar que Argentina cumpla con sus compromisos clim√°ticos internacionales.
                  </p>
                </div>
              </div>

              <div class="col-md-6">
                <div class="bg-white p-4 rounded-3 shadow-md h-100 transition-all" style="border: 1px solid rgba(38,44,81,0.2);">
                  <h6 class="mb-2 d-flex align-items-center gap-2" style="color: #262C51;">
                    <span class="d-inline-block rounded-circle" style="width:8px;height:8px;background-color:#262C51;"></span>
                    Protecci√≥n Ciudadana
                  </h6>
                  <p class="text-muted mb-0">
                    Protege a la ciudadan√≠a y ecosistemas, reduciendo la vulnerabilidad frente al cambio clim√°tico.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div><!-- end card -->
      </div>
    </div>
  </div>
</div>


{% endblock%}