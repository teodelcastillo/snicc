{% extends 'mainv2/base.html' %}        
{% load static snicc_i18n %}
{% block content %}
                <!-- Regulations page -->
                <div class="link-new-norm-content">
                    
                    <div class="post-row-mobile row">
                        <h1 class="post-title">{% ts 'Normativas' lang %}</h1>
                        <div class="col-md-3 col-categories">

                            <div class="cat-content">
                                <h5>{% ts 'Categorias' lang %}</h5>

                                {# --- Opción "Todas" --- #}
                                {% if not regfilter %}
                                    <a href="." class="active">
                                {% else %}
                                    <a href=".">
                                {% endif %}
                                    <span style="color: black; font-size: 14px; font-family: Montserrat; font-weight: 400; line-height: 26px; word-wrap: break-word;">
                                        {% ts 'Todas' lang %}
                                    </span>
                                </a>

                                {# --- Resto de las categorías dinámicas --- #}
                                {% for k,v in total.items %}
                                    {% if regfilter == k %}
                                        <a href="." class="active">
                                    {% else %}
                                        <a href="?filter={{k}}">
                                    {% endif %}
                                        <span style="color: black; font-size: 14px; font-family: Montserrat; font-weight: 400; line-height: 26px; word-wrap: break-word;">
                                            {% ts k.capitalize lang %}
                                        </span> 
                                        <span class="badge text-bg-secondary">{{v}}</span>
                                    </a>
                                {% endfor %}
                            </div>

                            <div class="dropdown dropdown-categories">
                                <button class="dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {% ts 'Categorias' lang %}
                                </button>
                                <ul class="dropdown-menu">
                                    {# --- Opción "Todas" --- #}
                                    <li>
                                        <a class="dropdown-item {% if not regfilter %}active{% endif %}" href=".">
                                            <span style="color: black; font-size: 14px; font-family: Montserrat; font-weight: 400; line-height: 26px; word-wrap: break-word;">
                                                {% ts 'Todas' lang %}
                                            </span>
                                        </a>
                                    </li>

                                    {# --- Categorías dinámicas --- #}
                                    {% for k,v in total.items %}
                                        <li>
                                            <a class="dropdown-item {% if regfilter == k %}active{% endif %}" href="?filter={{k}}">
                                                <span style="color: black; font-size: 14px; font-family: Montserrat; font-weight: 400; line-height: 26px; word-wrap: break-word;">
                                                    {% ts k.capitalize lang %}
                                                </span>
                                                <span class="badge text-bg-secondary">{{v}}</span>
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>

                        </div>


                        <div class="col-md-8 col-post">

                            <form class="main-form search-form" role="search" action="." method="get" id="apachesolr-search-custom-page-search-form" accept-charset="UTF-8"><div>
                                <div class="input-group">
                                    <input placeholder="{% ts 'Buscá por ley, decreto, resolución o palabra clave' lang %}" class="input-search form-control" id="pattern" name="pattern" value="" size="20" maxlength="255">
                                    <span class="input-group-btn">
                                    <button class="bg-white btn-search-reset btn btn-primary form-submit" aria-labelledby="edit-keys" aria-label="Buscar" type="submit" id="edit-submit" name="op" value="buscar">
                                        <img src="{% static 'main/images/iconos/search.svg'%}" alt=""></i><span class="sr-only">Buscá por ley, decreto, resolución o palabra clave</span>
                                    </button>
                                </span></div>
                                </div>
                            </form>
                            
                            {# --- Eliminando de la UI las categorias de contenido de las normas --- #}

                            <!--
                            <div class="norm-content">
                                <div class="row row-norm-img">
                                    <div>
                                        <img src="{% static 'main/images/normativas/decreto.svg'%}" alt="Decreto">
                                        <span>{% ts 'Decreto' lang %}</span>
                                    </div>
                                    <div>
                                        <img src="{% static 'main/images/normativas/ley.svg'%}" alt="Ley">
                                        <span>{% ts 'Ley' lang %}</span>
                                    </div>
                                    <div>
                                        <img src="{% static 'main/images/normativas/decisiones administrativas.svg'%}" alt="Decisiones administrativas">
                                        <span>{% ts 'Decisiones administrativas' lang %}</span>
                                    </div>
                                    <div>
                                        <img src="{% static 'main/images/normativas/resolucion.svg'%}" alt="Resoluciones">
                                        <span>{% ts 'Resoluciones' lang %}</span>
                                    </div>
                                </div>
                                                            -->
                            <div style="
                                display: flex;
                                gap: 10px;
                                width: 100%;
                                flex-wrap: wrap;
                                justify-content: flex-start;
                                margin-top: 15px;
                                margin-bottom: 40px;
                            
                                ">
                                {% if regs %}
                                {% for reg in regs %}{% with content=reg|translate:lang %}
                                    <div style="
                                    display: flex;
                                    padding: 0;
                                    flex-direction: column;
                                    align-items: flex-start;
                                    gap: 10px;
                                    ">
                                    <a href='{{ reg.url }}' target='_blank' style='text-decoration: none; width: 100%;'>
                                        <div style='
                                        display: flex;
                                        width: 356px;
                                        height: 284px;
                                        padding: 24px 15px;
                                        flex-direction: column;
                                        align-items: flex-start;
                                        justify-content: space-between;
                                        border-radius: 10px;
                                        outline: 1px #D8D8D8 solid;
                                        outline-offset: -1px;
                                        background: white;
                                        '>
                                        <div style='display: flex; flex-direction: column; align-items: flex-start; gap: 18px;'>
                                            <!-- Título + Ícono -->
                                            <div style='display: flex; align-items: flex-end; gap: 17px; align-self: stretch;'>
                                            <div style='width: 41.084px; height: 41.084px; flex-shrink: 0; background: #19354D;  border-radius: 50%; display: flex; justify-content: center; align-items: center;'>
                                                <img src="{% static 'main/images/normativas/'%}{{ reg.linktype.lower }}.svg" alt="{{ reg.linktype }}" style="width: 22px; height: 22px; color: white;">
                                            </div>
                                            <div style='display: flex; width: 291px; height: 51px; flex-direction: column; justify-content: center; overflow: hidden;'>
                                                <div style='
                                                color: black;
                                                font-size: 18px;
                                                font-family: Lora, serif;
                                                font-weight: 700;
                                                line-height: 26px;
                                                word-wrap: break-word;
                                                overflow: hidden;
                                                text-overflow: ellipsis;
                                                display: -webkit-box;
                                                -webkit-line-clamp: 2;
                                                -webkit-box-orient: vertical;
                                                '>
                                                {{ content.name }}
                                                </div>
                                            </div>
                                            </div>

                                            <!-- Descripción -->
                                            <div style='
                                            align-self: stretch;
                                            color: #000;
                                            font-family: Montserrat, sans-serif;
                                            font-size: 16px;
                                            font-style: normal;
                                            font-weight: 400;
                                            line-height: 26px;
                                            overflow: hidden;
                                            text-overflow: ellipsis;
                                            display: -webkit-box;
                                            -webkit-line-clamp: 3;
                                            -webkit-box-orient: vertical;
                                            '>
                                            {{ content.description }}
                                            </div>
                                        </div>

                                        <!-- Botón -->
                                        <div style='
                                            display: flex;
                                            height: 34px;
                                            padding: 12px 20px;
                                            justify-content: center;
                                            align-items: center;
                                            gap: 10px;
                                            align-self: stretch;
                                            border-radius: 10px;
                                            background: #2E6695;
                                            color: white;
                                            font-size: 14px;
                                            font-family: Montserrat, sans-serif;
                                            font-weight: 600;
                                            line-height: 26px;
                                            text-align: center;
                                        '>
                                            Ver enlace
                                        </div>
                                        </div>
                                    </a>
                                    </div>
                                {% endwith %}{% endfor %}
                                {% else %}
                                    <div style="
                                    width: 100%;
                                    text-align: center;
                                    padding: 60px 0;
                                    color: #242C4F;
                                    font-family: Montserrat, sans-serif;
                                    font-size: 16px;
                                    font-weight: 500;
                                    line-height: 28px;
                                    border-radius: 8px;
                                    ">
                                    No se encontraron publicaciones para esta categoría.
                                    </div>
                                {% endif %}
                                </div>
    



                            

                            <div class="pagination-content">
                                <nav aria-label="...">
                                    <ul class="pagination">
                                        {% if regs.has_previous %}
                                        <li class="page-item">
                                            <a class="page-link" href="{% querystring page=1 %}">&lt;</a>
                                        </li>
                                        {% endif %}
                
                                        {%for p in regs.paginator.get_elided_page_range %}
                                        <li class="page-item {% if p == regs.number %}disabled active{% endif %}">
                                            <a class="page-link" href="{% querystring page=p %}">{{p}}</a>
                                        </li>
                                        {% endfor %}
                
                                        {% if regs.has_next %}
                                          <li class="page-item">
                                            <a class="page-link" href="{% querystring page=regs.paginator.num_pages %}"></a>
                                        </li>
                                        {% endif %}
                
                                    </ul>
                                </nav>
                            </div>

                        </div>
                        
                    </div>

                    
                </div>
                    
                <!-- end post page -->
{% endblock %}